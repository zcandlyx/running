(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/map/index"],{"37c0":function(t,e,n){"use strict";var i=n("9205"),o=n.n(i);o.a},"3b44":function(t,e,n){"use strict";n.r(e);var i=n("4254"),o=n("c2c6");for(var s in o)"default"!==s&&function(t){n.d(e,t,(function(){return o[t]}))}(s);n("37c0");var l,a=n("f0c5"),u=Object(a["a"])(o["default"],i["b"],i["c"],!1,null,"00b91dfc",null,!1,i["a"],l);e["default"]=u.exports},4254:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}));var i={neilModal:function(){return n.e("components/neil-modal/neil-modal").then(n.bind(null,"ef59"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,Number(t.horizontalAccuracy).toFixed(2)),i=Number(t.horizontalAccuracy).toFixed(2),o=Number(t.speed).toFixed(2);t.$mp.data=Object.assign({},{$root:{g0:n,g1:i,g2:o}})},s=[]},5410:function(t,e,n){"use strict";(function(t){n("10c2");i(n("66fd"));var e=i(n("3b44"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},9205:function(t,e,n){},c2c6:function(t,e,n){"use strict";n.r(e);var i=n("fb8c"),o=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=o.a},fb8c:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{isStart:!0,startLatitude:"",startLongitude:"",latitude:23.099994,longitude:113.32452,polyline:[{points:[],color:"#01BD03",width:2}],circles:[{latitude:"",longitude:"",color:"#99CCFF",radius:20}],speed:"0",horizontalAccuracy:0,isRuning:!0,num:3,timer:0,beforeStart:!0,animation:"animate__backOutLeft",n_sec:0,n_min:0,n_hour:0,cutDownTimer:null,time:"00: 00: 00",dataMaskHidden:!1,pointerEvents:"auto",mapPointerEvents:"none",positionTimer:{},startTime:0,show:!1,stepAuth:!0}},created:function(){t.getSetting({success:function(t){console.log(t.authSetting)},fail:function(t){console.log(t)}})},onShow:function(){self=this,t.getLocation({success:function(){self.stepAuth=!0,console.log("获取权限")},fail:function(){self.stepAuth=!1,t.showToast({title:"请授权,否则无法继续"})}});var e=wx.getSystemInfoSync().SDKVersion;this.compareVersion(e,"1.1.0")>=0?wx.openBluetoothAdapter():wx.showModal({title:"提示",content:"当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。"})},destroyed:function(){clearInterval(this.timer),clearInterval(this.cutDownTimer),clearInterval(this.positionTimer)},methods:{start_before:function(){var t=this;this.stepAuth&&(this.beforeStart=!1,this.timer=setInterval((function(){t.num--,0===t.num&&(console.log("倒计时结束"),clearInterval(t.timer),t.monitor(),t.coutDown(),t.startTime=(new Date).getTime(),console.log("starttime",t.startTime))}),1e3),this.getPosition())},setting:function(){t.showToast({title:"此功能暂未开放",icon:"none"})},hidden_data_mask:function(){this.dataMaskHidden=!0,this.pointerEvents="none",this.mapPointerEvents="auto",console.log("hidden_data_mask",this.style)},startRuning:function(){console.log(this.isRuning),this.isRuning=!this.isRuning,this.monitor(),this.coutDown()},hiddenMap:function(){this.dataMaskHidden=!1,this.pointerEvents="auto",this.mapPointerEvents="none",console.log("hiddenMap",this.style)},getPosition:function(){t.getLocation({type:"gcj02",isHighAccuracy:!0,success:function(t){self.isStart&&(self.startLongitude=self.circles[0].longitude=t.longitude,self.startLatitude=self.circles[0].latitude=t.latitude,self.$store.commit("running/SET_RUN_START",{longitude:t.longitude,latitude:t.latitude}),self.polyline[0].points.push({latitude:t.latitude,longitude:t.longitude})),self.longitude=t.longitude,self.latitude=t.latitude,self.isStart=!1,console.log("当前位置的经度："+t.longitude),console.log("当前位置的纬度："+t.latitude)},fail:function(t){console.log(t)}})},monitor:function(){this.positionTimer=setInterval((function(){t.getLocation({type:"gcj02",success:function(t){t.speed;var e=t.longitude,n=t.latitude;console.log("当前位置的纬度："+n),self.polyline[0].points.push({latitude:n,longitude:e});var i=(new Date).getTime(),o=(i-self.startTime)/6e4;self.horizontalAccuracy=Number(self.GetDistance(self.startLatitude,self.startLongitude,n,e)).toFixed(2),self.speed="Infinity"===(o/parseFloat(self.horizontalAccuracy)).toFixed(2)?Number(0).toFixed(2):(o/parseFloat(self.horizontalAccuracy)).toFixed(2)}})}),2e3)},pauseRuning:function(){this.isRuning=!this.isRuning,clearInterval(this.cutDownTimer),clearInterval(this.positionTimer)},compareVersion:function(t,e){t=t.split("."),e=e.split(".");var n=Math.max(t.length,e.length);while(t.length<n)t.push("0");while(e.length<n)e.push("0");for(var i=0;i<n;i++){var o=parseInt(t[i]),s=parseInt(e[i]);if(o>s)return 1;if(o<s)return-1}return 0},GetDistance:function(t,e,n,i){console.log(t,e,n,i);var o=t*Math.PI/180,s=n*Math.PI/180,l=o-s,a=e*Math.PI/180-i*Math.PI/180,u=2*Math.asin(Math.sqrt(Math.pow(Math.sin(l/2),2)+Math.cos(o)*Math.cos(s)*Math.pow(Math.sin(a/2),2)));return u*=6378.137,u=Math.round(1e4*u)/1e4,u},coutDown:function(){this.cutDownTimer=setInterval((function(){var t=self.n_sec,e=self.n_min,n=self.n_hour;self.n_sec<10&&(t="0"+self.n_sec),self.n_min<10&&(e="0"+self.n_min),self.n_hour<10&&(n="0"+self.n_hour);var i=n+":"+e+":"+t;self.time=i,self.n_sec++,self.n_sec>59&&(self.n_sec=0,self.n_min++),self.n_min>59&&(self.n_sec=0,self.n_hour++)}),1e3)},overRunning:function(){console.log(this.polyline),this.show=!0,this.pauseRuning()},closeModal:function(){this.show=!1},bindBtn:function(t){"confirm"===t?console.log("结束"):console.log("取消")}}};e.default=n}).call(this,n("543d")["default"])}},[["5410","common/runtime","common/vendor"]]]);